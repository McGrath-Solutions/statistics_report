require({baseUrl:"../",paths:{jquery:"bower_components/jquery/dist/jquery.min",main:"bower_components/reports-generator/dist/compiled-generator.min"}},["jquery","main"],function(a,b){a(document).ready(function(){var c,d=a("#options").children(),e=function(){d.is(":focus")||(a("#selected").text("No report type selected."),a("#downloadLabel").addClass("notReady"),a("#download").addClass("notReady"),a("#downloadPDF").addClass("notReady"),a("#downloadXLS").addClass("notReady"))},f=function(b){var d=b.attr("id");a("#selected").text("Selected "+d+" report."),a("#downloadLabel").removeClass("notReady"),a("#download").removeClass("notReady"),a("#downloadPDF").removeClass("notReady"),a("#downloadXLS").removeClass("notReady"),j=!0,b.focus(),c=d},g=function(a){return"number"===a?Number:"date"===a?Date:"boolean"===a?Boolean:"string"===a?String:void 0},h=function(a){for(var b=[],c=0;c<a.length;c++)b[c]=g(a[c]);return b},i=function(a){for(var c=Object.keys(a),d={},e=c[0],f=0;f<c.length;f++){var g=c[f];d[g]={},d[g].name=a[g].name}d[e].information={},d[e].information.Generated=new Date,d[e].information.Month=Number(n+1)+"/"+o;for(var f=0;f<c.length;f++){var g=c[f];d[g].data=[];for(var i=a[g].data,j=0;j<i.length;j++){var k=h(i[j].schema);i[j].schema=k,d[g].data[j]=b.Table.initializeFromTable(i[j])}}return d},j=!0,k=new Date,l=k.getMonth(),m=k.getFullYear(),n=l,o=m,p=a("#month"),q=a("#year");q.text(m),p.val(l),p.on("change",function(){var b=Number(a(this).val());n=b,l>=b?(q.text(m),o=m):(q.text(m-1),o=m-1)}),d.on("click",function(){return j?void f(a(this)):this.blur()}),a("#download").on("click",function(){j=!1,a.ajax({url:"/generate",type:"POST",data:{type:c,dateFor:new Date(o,n,1)},dataType:"json",success:function(a){window.location.href=a.needLogin?"/login":"/download/"+a.fileName},error:function(a,b,c){},complete:function(){j=!0}})});var r=function(){var d=a(this).attr("id");j=!1;var e=Number(n+1)+"-1-"+o,f="/api/"+c+"/"+e;a.ajax({url:f,type:"GET",dataType:"json",success:function(a){a.needLogin&&(window.location.href="/login");var e=i(a),f=c+"-"+Number(n+1)+"-"+o;"downloadPDF"===d?b.PDFReport(e,function(a,b){b.save(f)}):"downloadXLS"==d&&b.ExcelReport(e,function(a,b){b.save(f)})},error:function(a,b,c){},complete:function(){j=!0}})};a("#downloadXLS").on("click",r),a("#downloadPDF").on("click",r),a(this).on("click",function(){e()});var s=a("#loading").hide();a(this).ajaxStart(function(){s.show()}).ajaxStop(function(){s.hide()})})});
//# sourceMappingURL=export.min.js.map